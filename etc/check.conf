# youri-check sample configuration file
# $Id$

# resolver declaration
resolver = cgi

# preferences declaration
preferences = file_pref

# resultset declaration
resultset = dbi

# input plugins declaration
inputs = rpmlint \
         age \
         updates \
         build \
         conflicts \
         dependencies \
         missing \
         orphans

# output plugins declaration
outputs = file mail

# medias declaration
medias = main.i586 \
	 main.x86_64 \
	 main.sources \
	 contrib.i586 \
	 contrib.x86_64 \
	 contrib.sources \
	 free \
	 non-free \
	 free.sources \
	 non-free.sources

# helper variables
mirror        = ftp://ftp.free.fr/pub/Distributions_Linux/Mandrakelinux/devel/cooker
mirror_i586   = $mirror/i586/media
mirror_x86_64 = $mirror/x86_64/media

# resolver definition
[cgi]
class = Youri::Check::Maintainer::Resolver::CGI
url   = http://plf.zarb.org/cgi-bin/maintainers.cgi

# preferences definition
[file_pref]
class = Youri::Check::Maintainer::Preferences::File

# resultset definition
[dbi]
class  = Youri::Check::Resultset::DBI
driver = mysql
host   = localhost
base   = plf_youri
user   = plf
pass   = s3kr3t

# checks definitions
[updates]
class    = Youri::Check::Input::Updates
aliases  = <<EOF
--- #YAML:1.0
libfame0.8: ~
EOF
sources = <<EOF
--- #YAML:1.0
debian:
    class: Youri::Check::Input::Updates::Source::Debian
    aliases:
        fuse-emulator: ~
cpan:
    class: Youri::Check::Input::Updates::Source::CPAN
fedora:
    class: Youri::Check::Input::Updates::Source::Fedora
gentoo:
    class: Youri::Check::Input::Updates::Source::Gentoo
freshmeat:
    class: Youri::Check::Input::Updates::Source::Freshmeat
netbsd:
    class: Youri::Check::Input::Updates::Source::NetBSD
raa:
    class: Youri::Check::Input::Updates::Source::RAA
sourceforge:
    class: Youri::Check::Input::Updates::Source::Sourceforge
    aliases:
        openquicktime: ~
        klibido: ~
EOF

[rpmlint]
class  = Youri::Check::Input::Rpmlint

[age]
class   = Youri::Check::Input::Age
max_age = 12 months
pattern = %m months

[dependencies]
class = Youri::Check::Input::Dependencies

[conflicts]
class = Youri::Check::Input::Conflicts

[build]
class    = Youri::Check::Input::Build
sources = <<EOF
--- #YAML:1.0
stefan:
    class: Youri::Check::Input::Build::Source::LBD
    url: http://eijk.homelinux.org/build/
    medias:
        - cooker_plf-free
        - cooker_plf-non-free
    archs:
        - i586
EOF

[missing]
class    = Youri::Check::Input::Missing

[orphans]
class    = Youri::Check::Input::Orphans

# reports definitions
[file]
class      = Youri::Check::Output::File
to         = ${HOME}/www/qa
global     = 1
individual = 1
formats    = <<EOF
--- #YAML:1.0
html:
    class: Youri::Check::Output::File::Format::HTML
text:
    class: Youri::Check::Output::File::Format::Text
rss:
    class: Youri::Check::Output::File::Format::RSS
EOF

[mail]
class      = Youri::Check::Output::Mail
mta        = /usr/sbin/sendmail
to         = plf-admin@zarb.org
from       = plf@zarb.org
reply_to   = plf-admin@zarb.org
formats    = <<EOF
--- #YAML:1.0
text:
    class: Youri::Check::Output::Mail::Format::Text
EOF

# media definitions
[main.i586]
class       = Youri::Media::URPM
name        = main
type        = binary
path        = $mirror_i586/main
hdlist      = $mirror_i586/media_info/hdlist_main.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[main.x86_64]
class       = Youri::Media::URPM
name        = main
type        = binary
path        = $mirror_x86_64/main
hdlist      = $mirror_x86_64/media_info/hdlist_main.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[main.sources]
class       = Youri::Media::URPM
name        = main
type        = source
path        = $mirror_i586/main
hdlist      = $mirror_i586/media_info/hdlist_main.src.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[contrib.i586]
class       = Youri::Media::URPM
name        = contrib
type        = binary
path        = $mirror_i586/contrib
hdlist      = $mirror_i586/media_info/hdlist_contrib.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[contrib.x86_64]
class       = Youri::Media::URPM
name        = contrib
type        = binary
path        = $mirror_x86_64/contrib
hdlist      = $mirror_x86_64/media_info/hdlist_contrib.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[contrib.sources]
class       = Youri::Media::URPM
name        = contrib
type        = source
path        = $mirror_i586/contrib
hdlist      = $mirror_i586/media_info/hdlist_contrib.src.cz
skip_inputs = <<EOF
--- #YAML:1.0
- all
EOF

[free]
class          = Youri::Media::URPM
name           = free
type           = binary
path           = ${HOME}/ftp/mandrake/free/cooker/i586
hdlist         = ${HOME}/ftp/mandrake/free/cooker/i586/hdlist.cz
rpmlint_config = ${HOME}/etc/rpmlint-free.conf
allow_deps     = <<EOF
--- #YAML:1.0
- main.i586
- main.x86_64
- contrib.i586
- contrib.x86_64
- free
EOF
allow_srcs      = <<EOF
--- #YAML:1.0
- free.sources
- main.sources
- contrib.sources
EOF
skip_archs     = <<EOF
--- #YAML:1.0
- ppc
EOF

[free.sources]
class          = Youri::Media::URPM
name           = free
type           = source
path           = ${HOME}/ftp/mandrake/free/src
hdlist         = ${HOME}/ftp/mandrake/free/src/hdlist.cz
rpmlint_config = ${HOME}/etc/rpmlint-free.conf
allow_deps     = <<EOF
--- #YAML:1.0
- main.i586
- contrib.i586
- free
EOF

[non-free]
class          = Youri::Media::URPM
name           = non-free
type           = binary
path           = ${HOME}/ftp/mandrake/non-free/cooker/i586
hdlist         = ${HOME}/ftp/mandrake/non-free/cooker/i586/hdlist.cz
rpmlint_config = ${HOME}/etc/rpmlint-non-free.conf
allow_deps     = <<EOF
--- #YAML:1.0
- main.i586
- main.x86_64
- contrib.i586
- contrib.x86_64
- free
- non-free
EOF
allow_srcs      = <<EOF
--- #YAML:1.0
- non-free.sources
EOF
skip_archs     = <<EOF
--- #YAML:1.0
- ppc
EOF

[non-free.sources]
class          = Youri::Media::URPM
name           = non-free
type           = source
path           = ${HOME}/ftp/mandrake/non-free/src
hdlist         = ${HOME}/ftp/mandrake/non-free/src/hdlist.cz
rpmlint_config = ${HOME}/etc/rpmlint-non-free.conf
allow_deps     = <<EOF
--- #YAML:1.0
- main.i586
- contrib.i586
- free
- non-free
EOF
